alert: LegoCertificateRenewalFailure
expr: |
  sum by (model, model_uuid, charm_name) (
    count_over_time(
      ({charm_name="lego"} |= "lego_renewal_failure")[15m]
    )
  ) > 0
for: 0m
labels:
  severity: page
annotations:
  summary: "LEGO certificate renewal failed"
  description: "lego-operator failed to obtain/renew a certificate from ACME. Inspect logs for details."
